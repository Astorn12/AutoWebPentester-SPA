import { AlertifyService } from './../_services/alertify.service';
import { WebsiteService } from './../_services/website.service';
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-websites',
  templateUrl: './websites.component.html',
  styleUrls: ['./websites.component.css']
})
export class WebsitesComponent implements OnInit {
  allWebSites : any[];
  recentWebSites: any[];
  

  constructor(private webSiteService : WebsiteService,private alertify: AlertifyService) {

   }

  ngOnInit() {
    this.loadAllUsersWebSites();
    this.loadRecentUsersWebSites();
  }
  loadRecentUsersWebSites() {
    this.webSiteService.getRecent().subscribe((resentWebSites: any[])=>{
      this.recentWebSites=resentWebSites;
    },error=>{
      this.alertify.error(error);
    });

  }
  loadAllUsersWebSites() {
    this.webSiteService.getAll().subscribe((webSites: any[])=>{
      this.allWebSites=webSites;
    },error=>{
      this.alertify.error(error);
    });
}

  addWebSite(form :any){
    this.webSiteService.addWebSite(form.value).subscribe((response)=>{
      this.loadAllUsersWebSites();
      this.loadRecentUsersWebSites();
    },error=>{
      this.alertify.error(error);
    })
  }
}
