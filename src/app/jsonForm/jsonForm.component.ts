import { Component, OnInit, Input, OnChanges, TemplateRef, EventEmitter, Output } from '@angular/core';
import { ITdDynamicElementConfig } from '@covalent/dynamic-forms';
import { AbstractControl, FormControl } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { MatChipInputEvent } from '@angular/material/chips';
import {COMMA, ENTER} from '@angular/cdk/keycodes';






@Component({
  selector: 'app-jsonForm',
  templateUrl: './jsonForm.component.html',
  styleUrls: ['./jsonForm.component.css']
})
export class JsonFormComponent implements OnInit, OnChanges {

  @Input() input: any;

  properties: any;

  @Output() nextEmiter =new EventEmitter();

  constructor() { }

  ngOnChanges(changes: import("@angular/core").SimpleChanges): void {
    this.properties = Object.keys(this.input);
  }

  ngOnInit() {

  }

  startPentest(){
    this.nextEmiter.emit(this.input);
  }


  visible = true;
  selectable = true;
  removable = true;
  addOnBlur = true;
  readonly separatorKeysCodes: number[] = [ENTER, COMMA];
  add(event: MatChipInputEvent, array: any[]): void {
    const input = event.input;
    const value = event.value;

    // Add our fruit
    if ((value || '').trim()) {
      array.push({ name: value.trim() });
    }

    // Reset the input value
    if (input) {
      input.value = '';
    }
  }

  remove(chips: any, array: any[]): void {
    const index = array.indexOf(chips);

    if (index >= 0) {
      array.splice(index, 1);
    }
  }

}
